<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" type="text/css" href="../course-styles.css">
  <link rel="stylesheet" type="text/css" href="../general-styles.css">
  <link href="https://fonts.googleapis.com/css?family=Libre+Franklin&display=swap" rel="stylesheet">
  <title>Document</title>
</head>
<body>
  <header>
    <div class="menu-container">
      <div class="menu-item" id="menu-home">
        <a id="menu-home-icon" href="../index.html">Home</a>
      </div>
      <div class="menu-item" id="menu-home">
        <a id="course-home-icon" class="active">Interactive Course</a>
      </div>
      <div class="menu-item">
        <a href="../resources-page/resources-home.html">Resources</a>
      </div>
    </div>
  </header>
  <main>
    <div id="intro">
      <h1 id="intro-header">Welcome to the Interactive Course</h1>
      <p id="intro-paragraph">During this course, we will provide you with valuable information about food storage and walk you through the process of creating a simple plan to create food storage. Information includes creating a 72-hour kit, a 1 month, and a 3 month storage creation. At the end, a checklist of your customized plans will be available for your use to print or download.</p>
      <div class="button-container">
        <button class="course-button" onclick="_goToNextPage('intro', 'basic-info')">Next</button>
      </div>
    </div>
    <div id="basic-info">
      <h1 id="basic-info-header">Basic Info</h1>
      <div class="flex"><p class="info-title">Number of people in household: </p><input id="basic-info-people-input" class="info-number-input" type="number"></input></div>
      <div class="button-container">
        <button class="course-button" onclick="_goToPreviousPage('basic-info', 'intro')">Prev</button>
        <p id="basic-info-error-message" class="error-message hidden">One or more required inputs are not completed</p>
        <button class="course-button" onclick="_goToNextPage('basic-info', 'section-1');">Next</button>
      </div>
    </div>
    <div id="section-1">
      <h1 class="section-title">72-Hour Kit</h1>
        <div id="food-container-72hour">
          <div class="food-header">
            <h2 class="food-title container-title">Food</h2>
            <img class="info-icon" src="../images/info.png">
          </div>
          <div id="food-item-container-72hour">
            <div class="course-item">
              <input class="item-input" type="text" placeholder="Item Name">
              <input class="item-input"type="number" placeholder="Qty.">
              <input class="item-input" type="text" placeholder="Scale (Optional)">
              <br/>
            </div>
            <div class="course-item">
              <input class="item-input" type="text" placeholder="Item Name">
              <input class="item-input" type="number" placeholder="Qty.">
              <input class="item-input" type="text" placeholder="Scale (Optional)">
              <br/>
            </div>
            <div class="course-item">
              <input class="item-input" type="text" placeholder="Item Name">
              <input class="item-input" type="number" placeholder="Qty.">
              <input class="item-input" type="text" placeholder="Scale (Optional)">
              <br/>
            </div>
          </div>
          <button class="course-button" onclick="_addInput('food-item-container-72hour')">Add</button>
          <button class="course-button" onclick="_removeInput('food-item-container-72hour')">Remove</button>  
        </div>
        <div id="supplies-container-72hour">
          <div class="supplies-header">
            <h2 class="food-title container-title">Supplies</h2>
            <img class="info-icon" src="../images/info.png">
          </div>
          <div id="supplies-item-container-72hour">
            <div class="course-item">
              <input class="item-input" type="text" placeholder="Item Name">
              <input class="item-input"type="number" placeholder="Qty.">
              <input class="item-input" type="text" placeholder="Scale (Optional)">
              <br/>
            </div>
            <div class="course-item">
              <input class="item-input" type="text" placeholder="Item Name">
              <input class="item-input" type="number" placeholder="Qty.">
              <input class="item-input" type="text" placeholder="Scale (Optional)">
              <br/>
            </div>
            <div class="course-item">
              <input class="item-input" type="text" placeholder="Item Name">
              <input class="item-input" type="number" placeholder="Qty.">
              <input class="item-input" type="text" placeholder="Scale (Optional)">
              <br/>
            </div>
          </div>
          <button class="course-button" onclick="_addInput('supplies-item-container-72hour')">Add</button>
          <button class="course-button" onclick="_removeInput('supplies-item-container-72hour')">Remove</button>  
        </div>
      <div class="button-container">
        <button class="course-button" onclick="_goToPreviousPage('section-1', 'basic-info')">Prev</button>
        <button class="course-button" onclick="_goToNextPage('section-1', 'section-2')">Next</button>
      </div>
    </div>
    <div id="section-2">
      <h1>1 Month (30 Days)</h1>
      <div class="food-header">
        <h2 class="food-title container-title">Food</h2>
        <img class="info-icon" src="../images/info.png">
      </div>
      <div id="food-item-container-1month">
        <div class="course-item">
          <input class="item-input" type="text" placeholder="Item Name">
          <input class="item-input"type="number" placeholder="Qty.">
          <input class="item-input" type="text" placeholder="Scale (Optional)">
          <br/>
        </div>
        <div class="course-item">
          <input class="item-input" type="text" placeholder="Item Name">
          <input class="item-input" type="number" placeholder="Qty.">
          <input class="item-input" type="text" placeholder="Scale (Optional)">
          <br/>
        </div>
        <div class="course-item">
          <input class="item-input" type="text" placeholder="Item Name">
          <input class="item-input" type="number" placeholder="Qty.">
          <input class="item-input" type="text" placeholder="Scale (Optional)">
          <br/>
        </div>
        <div class="course-item">
          <input class="item-input" type="text" placeholder="Item Name">
          <input class="item-input"type="number" placeholder="Qty.">
          <input class="item-input" type="text" placeholder="Scale (Optional)">
          <br/>
        </div>
        <div class="course-item">
          <input class="item-input" type="text" placeholder="Item Name">
          <input class="item-input" type="number" placeholder="Qty.">
          <input class="item-input" type="text" placeholder="Scale (Optional)">
          <br/>
        </div>
        <div class="course-item">
          <input class="item-input" type="text" placeholder="Item Name">
          <input class="item-input" type="number" placeholder="Qty.">
          <input class="item-input" type="text" placeholder="Scale (Optional)">
          <br/>
        </div>
      </div>
      <button class="course-button" onclick="_addInput('food-item-container-1month')">Add</button>
      <button class="course-button" onclick="_removeInput('food-item-container-1month')">Remove</button>  
      <div id="supplies-container-1month">
        <div class="supplies-header">
          <h2 class="food-title container-title">Supplies</h2>
          <img class="info-icon" src="../images/info.png">
        </div>
        <div id="supplies-item-container-1month">
          <div class="course-item">
            <input class="item-input" type="text" placeholder="Item Name">
            <input class="item-input"type="number" placeholder="Qty.">
            <input class="item-input" type="text" placeholder="Scale (Optional)">
            <br/>
          </div>
          <div class="course-item">
            <input class="item-input" type="text" placeholder="Item Name">
            <input class="item-input" type="number" placeholder="Qty.">
            <input class="item-input" type="text" placeholder="Scale (Optional)">
            <br/>
          </div>
          <div class="course-item">
            <input class="item-input" type="text" placeholder="Item Name">
            <input class="item-input" type="number" placeholder="Qty.">
            <input class="item-input" type="text" placeholder="Scale (Optional)">
            <br/>
          </div>
          <div class="course-item">
            <input class="item-input" type="text" placeholder="Item Name">
            <input class="item-input"type="number" placeholder="Qty.">
            <input class="item-input" type="text" placeholder="Scale (Optional)">
            <br/>
          </div>
          <div class="course-item">
            <input class="item-input" type="text" placeholder="Item Name">
            <input class="item-input" type="number" placeholder="Qty.">
            <input class="item-input" type="text" placeholder="Scale (Optional)">
            <br/>
          </div>
          <div class="course-item">
            <input class="item-input" type="text" placeholder="Item Name">
            <input class="item-input" type="number" placeholder="Qty.">
            <input class="item-input" type="text" placeholder="Scale (Optional)">
            <br/>
          </div>
        </div>
      </div>
      <button class="course-button" onclick="_addInput('supplies-item-container-1month')">Add</button>
      <button class="course-button" onclick="_removeInput('supplies-item-container-1month')">Remove</button>  
      <div class="button-container">
        <button class="course-button" onclick="_goToPreviousPage('section-2', 'section-1')">Prev</button>
        <p id="basic-info-error-message" class="error-message hidden">One or more required inputs are not completed</p>
        <button class="course-button" onclick="_goToNextPage('section-2', 'section-3')">Next</button>
      </div>
    </div>
    <div id="section-3">
      <h1>3 Month (90 Days)</h1>
      <div class="food-header">
        <h2 class="food-title container-title">Food</h2>
        <img class="info-icon" src="../images/info.png">
      </div>
      <div id="food-item-container-3month">
        <div class="course-item">
          <input class="item-input" type="text" placeholder="Item Name">
          <input class="item-input"type="number" placeholder="Qty.">
          <input class="item-input" type="text" placeholder="Scale (Optional)">
          <br/>
        </div>
        <div class="course-item">
          <input class="item-input" type="text" placeholder="Item Name">
          <input class="item-input" type="number" placeholder="Qty.">
          <input class="item-input" type="text" placeholder="Scale (Optional)">
          <br/>
        </div>
        <div class="course-item">
          <input class="item-input" type="text" placeholder="Item Name">
          <input class="item-input" type="number" placeholder="Qty.">
          <input class="item-input" type="text" placeholder="Scale (Optional)">
          <br/>
        </div>
        <div class="course-item">
          <input class="item-input" type="text" placeholder="Item Name">
          <input class="item-input"type="number" placeholder="Qty.">
          <input class="item-input" type="text" placeholder="Scale (Optional)">
          <br/>
        </div>
        <div class="course-item">
          <input class="item-input" type="text" placeholder="Item Name">
          <input class="item-input" type="number" placeholder="Qty.">
          <input class="item-input" type="text" placeholder="Scale (Optional)">
          <br/>
        </div>
        <div class="course-item">
          <input class="item-input" type="text" placeholder="Item Name">
          <input class="item-input" type="number" placeholder="Qty.">
          <input class="item-input" type="text" placeholder="Scale (Optional)">
          <br/>
        </div>
      </div>
      <button class="course-button" onclick="_addInput('food-item-container-3month')">Add</button>
      <button class="course-button" onclick="_removeInput('food-item-container-3month')">Remove</button>  
      <div id="supplies-container-3month">
        <div class="supplies-header">
          <h2 class="food-title container-title">Supplies</h2>
          <img class="info-icon" src="../images/info.png">
        </div>
        <div id="supplies-item-container-3month">
          <div class="course-item">
            <input class="item-input" type="text" placeholder="Item Name">
            <input class="item-input"type="number" placeholder="Qty.">
            <input class="item-input" type="text" placeholder="Scale (Optional)">
            <br/>
          </div>
          <div class="course-item">
            <input class="item-input" type="text" placeholder="Item Name">
            <input class="item-input" type="number" placeholder="Qty.">
            <input class="item-input" type="text" placeholder="Scale (Optional)">
            <br/>
          </div>
          <div class="course-item">
            <input class="item-input" type="text" placeholder="Item Name">
            <input class="item-input" type="number" placeholder="Qty.">
            <input class="item-input" type="text" placeholder="Scale (Optional)">
            <br/>
          </div>
          <div class="course-item">
            <input class="item-input" type="text" placeholder="Item Name">
            <input class="item-input"type="number" placeholder="Qty.">
            <input class="item-input" type="text" placeholder="Scale (Optional)">
            <br/>
          </div>
          <div class="course-item">
            <input class="item-input" type="text" placeholder="Item Name">
            <input class="item-input" type="number" placeholder="Qty.">
            <input class="item-input" type="text" placeholder="Scale (Optional)">
            <br/>
          </div>
          <div class="course-item">
            <input class="item-input" type="text" placeholder="Item Name">
            <input class="item-input" type="number" placeholder="Qty.">
            <input class="item-input" type="text" placeholder="Scale (Optional)">
            <br/>
          </div>
        </div>
      </div>
      <button class="course-button" onclick="_addInput('supplies-item-container-3month')">Add</button>
      <button class="course-button" onclick="_removeInput('supplies-item-container-3month')">Remove</button>  
      <div class="button-container">
        <button class="course-button" onclick="_goToPreviousPage('section-3', 'section-2')">Prev</button>
        <button class="course-button" onclick="_goToNextPage('section-3', 'final-page')">Next</button>
      </div>
    </div>
    <div id="final-page">
      <h1>Your Plan</h1>
      <p id="plan-instructions">Print this page to use as a checklist!</p>
      <div id="plan-container">
        <div id="plan-72hour">

        </div>
        <div id="plan-1month">

        </div>
        <div id="plan-3month">

        </div>
      </div>
      <div class="button-container">
        <button class="course-button" onclick="_goToPreviousPage('final-page', 'section-3')">Edit Plan</button>
      </div>
    </div>
  </main>
</body>
</html>

<script>
  /*** DATA ***/
  let basicInfo = { peopleCount: 0};
  let data72Hour = { foodItems: [], supplyItems: [] };
  let data1Month = { foodItems: [], supplyItems: [] };
  let data3Month = { foodItems: [], supplyItems: [] };

  /*** SETTERS ***/
  function setBasicInfo() {
     let inputAmount = parseInt(document.getElementById('basic-info-people-input').value);
     if (!inputAmount) return;
     basicInfo.peopleCount = inputAmount;
  }
  function set72Hour() {
    data72Hour = { foodItems: [], supplyItems: [] };
    const foodItems = document.getElementById('food-item-container-72hour').children;
    const supplyItems = document.getElementById('supplies-item-container-72hour').children;

    // Find all inputs in food and set in data
    for (let foodItem = 0; foodItem < foodItems.length; foodItem++) {
      let foodItemInputs = foodItems[foodItem].children;
      let foodItemData = { name: foodItemInputs[0].value, 
                          quantity: foodItemInputs[1].value, 
                          scale: foodItemInputs[2].value || '' };
      data72Hour.foodItems.push(foodItemData);
    }

    // Find all inputs in supplies and set in data
    for (let supplyItem = 0; supplyItem < supplyItems.length; supplyItem++) {
      let supplyItemInputs = supplyItems[supplyItem].children;
      let suppluItemData = { name: supplyItemInputs[0].value, 
                             quantity: supplyItemInputs[1].value, 
                             scale: supplyItemInputs[2].value || '' };
      data72Hour.supplyItems.push(suppluItemData);
    }
  }
  function set1Month() {
    data1Month = { foodItems: [], supplyItems: [] };
    const foodItems = document.getElementById('food-item-container-1month').children;
    const supplyItems = document.getElementById('supplies-item-container-1month').children;

    // Find all inputs in food and set in data
    for (let foodItem = 0; foodItem < foodItems.length; foodItem++) {
      let foodItemInputs = foodItems[foodItem].children;
      let foodItemData = { name: foodItemInputs[0].value, 
                          quantity: foodItemInputs[1].value, 
                          scale: foodItemInputs[2].value || '' };
      data1Month.foodItems.push(foodItemData);
    }

    // Find all inputs in supplies and set in data
    for (let supplyItem = 0; supplyItem < supplyItems.length; supplyItem++) {
      let supplyItemInputs = supplyItems[supplyItem].children;
      let suppluItemData = { name: supplyItemInputs[0].value, 
                             quantity: supplyItemInputs[1].value, 
                             scale: supplyItemInputs[2].value || '' };
      data1Month.supplyItems.push(suppluItemData);
    }
  }
  function set3Month() {
    console.log("HERE");
    data3Month = { foodItems: [], supplyItems: [] };
    const foodItems = document.getElementById('food-item-container-3month').children;
    const supplyItems = document.getElementById('supplies-item-container-3month').children;

    // Find all inputs in food and set in data
    for (let foodItem = 0; foodItem < foodItems.length; foodItem++) {
      let foodItemInputs = foodItems[foodItem].children;
      let foodItemData = { name: foodItemInputs[0].value, 
                          quantity: foodItemInputs[1].value, 
                          scale: foodItemInputs[2].value || '' };
      data3Month.foodItems.push(foodItemData);
    }

    // Find all inputs in supplies and set in data
    for (let supplyItem = 0; supplyItem < supplyItems.length; supplyItem++) {
      let supplyItemInputs = supplyItems[supplyItem].children;
      let suppluItemData = { name: supplyItemInputs[0].value, 
                             quantity: supplyItemInputs[1].value, 
                             scale: supplyItemInputs[2].value || '' };
      data3Month.supplyItems.push(suppluItemData);
    }
    console.log("3 Month: ", data3Month);
  }
  function _storeData(location) {
    if (location === "basic-info") setBasicInfo();
    if (location === "section-1") set72Hour();
    if (location === "section-2") set1Month();
    if (location === "section-3") set3Month();
  }

  function _displayResults() {
    // Reset view
    const planContainer = document.getElementById('plan-container');
    planContainer.innerHTML = '';

    // 72 Hour
    let section1Container = document.createElement("div");  
    section1Container.classList.add('plan-section');          
    let section1HTML = `<h2>72 Hour</h2>`;
    data72Hour.foodItems.forEach((item) => {
      if (item.name && item.quantity) {
        section1HTML += `
          <div class="display-flex">
            <img class="checkbox" src="./../images/checkbox.png" />
            <p class="plan-item plan-item-name">${item.name}</p>
            <p class="plan-item">${item.quantity}</p>
            <p class="plan-item">${item.scale}</p>
          </div>
        `
      }
    });
    data72Hour.supplyItems.forEach((item) => {
      if (item.name && item.quantity) {
        section1HTML += `
          <div class="display-flex">
            <img class="checkbox" src="./../images/checkbox.png" />
            <p class="plan-item plan-item-name">${item.name}</p>
            <p class="plan-item">${item.quantity}</p>
            <p class="plan-item">${item.scale}</p>
          </div>
        `;
      }
    });
    section1Container.innerHTML = section1HTML;
    planContainer.appendChild(section1Container);

    // 1 Month
    let section2Container = document.createElement("div"); 
    section2Container.classList.add('plan-section');             
    let section2HTML = `<h2>1 Month</h2>`;
    data1Month.foodItems.forEach((item) => {
      if (item.name && item.quantity) {
        section2HTML += `
          <div class="display-flex">
            <img class="checkbox" src="./../images/checkbox.png" />
            <p class="plan-item plan-item-name">${item.name}</p>
            <p class="plan-item">${item.quantity}</p>
            <p class="plan-item">${item.scale}</p>
          </div>
        `
      }
    });
    data1Month.supplyItems.forEach((item) => {
      if (item.name && item.quantity) {
        section2HTML += `
          <div class="display-flex">
            <img class="checkbox" src="./../images/checkbox.png" />
            <p class="plan-item plan-item-name">${item.name}</p>
            <p class="plan-item">${item.quantity}</p>
            <p class="plan-item">${item.scale}</p>
          </div>
        `;
      }
    });
    section2Container.innerHTML = section2HTML;
    planContainer.appendChild(section2Container);

    // 3 Month
    let section3Container = document.createElement("div");   
    section3Container.classList.add('plan-section');           
    let section3HTML = `<h2>3 Month</h2>`;
    data3Month.foodItems.forEach((item) => {
      if (item.name && item.quantity) {
        section3HTML += `
          <div class="display-flex">
            <img class="checkbox" src="./../images/checkbox.png" />
            <p class="plan-item plan-item-name">${item.name}</p>
            <p class="plan-item">${item.quantity}</p>
            <p class="plan-item">${item.scale}</p>
          </div>
        `;
      }
    });
    data3Month.supplyItems.forEach((item) => {
      if (item.name && item.quantity) {
        section3HTML += `
          <div class="display-flex">
            <img class="checkbox" src="./../images/checkbox.png" />
            <p class="plan-item plan-item-name">${item.name}</p>
            <p class="plan-item">${item.quantity}</p>
            <p class="plan-item">${item.scale}</p>
          </div>
        `;
      }
    });
    section3Container.innerHTML = section3HTML;
    planContainer.appendChild(section3Container);
  }

  /*** TOGGLE ***/
  /*
   * _addInput
   * Adds an text input to a given section
   */
  function _addInput(section) {
    let itemContainer = document.createElement("div");  
    itemContainer.classList.add("course-item");              
    itemContainer.innerHTML = `
      <input class="item-input" type="text" placeholder="Item Name">
      <input class="item-input" type="number" placeholder="Qty.">
      <input class="item-input" type="text" placeholder="Scale (Optional)">
      <br/>
    `;
    document.getElementById(section).appendChild(itemContainer);
  }
  /*
   * _removeInput
   * Removes an text input to a given section
   */
  function _removeInput(section) {
    let itemContainer = document.getElementById(section);
    itemContainer.removeChild(itemContainer.lastElementChild);
  }

  function _goToPreviousPage(changeFrom, changeTo) {
    _storeData(changeFrom);
    _changeSectionFromTo(changeFrom, changeTo);
  }
  function _goToNextPage(changeFrom, changeTo) {
    _storeData(changeFrom);

    if (changeFrom === 'basic-info') {
      if (!basicInfo.peopleCount){
        return;
      }
    }

    
    if (changeTo === 'final-page') _displayResults();
    _changeSectionFromTo(changeFrom, changeTo);
  }
  /*
   * _changeSectionFromTo
   * This is meant to switch which section is being shown
   */
   function _changeSectionFromTo(changeFrom, changeTo) {
    document.getElementById(changeFrom).style.display = "none";
    document.getElementById(changeTo).style.display = "block";
  }
</script>